/************************************************
*                  Transform.cpp                *
*************************************************
*          This file is a part of:              *
*               COLUMBUS ENGINE                 *
*************************************************
*                Nika(Columbus) Red             *
*                   12.11.2017                  *
*************************************************/

#include <Scene/Transform.h>

namespace Columbus
{

	//////////////////////////////////////////////////////////////////////////////
	Transform::Transform() :
		mMatrix(1.0f)
	{
		
	}

	Transform::Transform(Vector3 aPos) :
		mPos(aPos),
		mMatrix(1.0f)
	{

	}

	Transform::Transform(Vector3 aPos, Vector3 aRot) :
		mPos(aPos),
		mRot(aRot),
		mMatrix(1.0f)
	{

	}

	Transform::Transform(Vector3 aPos, Vector3 aRot, Vector3 aScale) :
		mPos(aPos),
		mRot(aRot),
		mScale(aScale),
		mMatrix(1.0f)
	{

	}

	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	void Transform::setPos(Vector3 aPos)
	{
		mPos = aPos;
	}
	//////////////////////////////////////////////////////////////////////////////
	void Transform::addPos(Vector3 aPos)
	{
		mPos += aPos;
	}
	//////////////////////////////////////////////////////////////////////////////
	Vector3 Transform::getPos() const
	{
		return mPos;
	}
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	void Transform::setRot(Vector3 aRot)
	{
		mRot = aRot;
	}
	//////////////////////////////////////////////////////////////////////////////
	void Transform::addRot(Vector3 aRot)
	{
		mRot += aRot;
	}
	//////////////////////////////////////////////////////////////////////////////
	Vector3 Transform::getRot() const
	{
		return mRot;
	}
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	void Transform::setScale(Vector3 aScale)
	{
		mScale = aScale;
	}
	//////////////////////////////////////////////////////////////////////////////
	void Transform::addScale(Vector3 aScale)
	{
		mScale += aScale;
	}
	//////////////////////////////////////////////////////////////////////////////
	Vector3 Transform::getScale() const
	{
		return mScale;
	}
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	void Transform::update()
	{
		mMatrix.identity();

		mMatrix.scale(mScale);
		mMatrix.rotate(Vector3(0, 0, 1), mRot.z);
		mMatrix.rotate(Vector3(1, 0, 0), mRot.x);
		mMatrix.rotate(Vector3(0, 1, 0), mRot.y);
		mMatrix.translate(mPos);

		mNormalMatrix = mMatrix;
		mNormalMatrix.transpose();
		mNormalMatrix.invert();
	}
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	void Transform::setMatrix(Matrix4 aMatrix)
	{
		mMatrix = aMatrix;
	}
	//////////////////////////////////////////////////////////////////////////////
	Matrix4 Transform::getMatrix() const
	{
		return mMatrix;
	}
	//////////////////////////////////////////////////////////////////////////////
	Matrix4 Transform::getNormalMatrix() const
	{
		return mNormalMatrix;
	}
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	//////////////////////////////////////////////////////////////////////////////
	Transform::~Transform()
	{

	}

}


